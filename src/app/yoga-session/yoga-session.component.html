<h1>Termíny</h1>

<nz-list class="yoga-sessions" [nzLoading]="$yogaSessionsLoading | async" [nzBordered]="true">
  <nz-list-item *ngFor="let yogaSession of $yogaSessions | async">
    <nz-list-item-meta>
      <nz-list-item-meta-title>
        {{ yogaSession.date | luxonDateMedium }}
      </nz-list-item-meta-title>
      <!-- <nz-list-item-meta-description>
        TODO optional description
      </nz-list-item-meta-description> -->
    </nz-list-item-meta>

    <ul nz-list-item-actions>

      <nz-list-item-action appMatch>

        <span *appMatchCase="yogaSession | isSessionHistory" nz-tooltip
          [nzTooltipTitle]="'Termín již proběhl. Zvolte jiný termín.'">
          Termín již proběhl
          <span nz-icon nzType="info-circle" nzTheme="outline"></span>
        </span>

        <span *appMatchCase="yogaSession | isSessionLockout" nz-icon nzType="info-circle" nzTheme="outline" nz-tooltip
          [nzTooltipTitle]="'Rezervace byly uzavřeny ' + yogaSession.lockHoursBefore + ' hodin před termínem. Zvolte jiný termín.'">
          Rezervace uzavřeny
        </span>

        <span *appMatchCase="yogaSession | isSessionAtCapacity" nz-tooltip
          [nzTooltipTitle]="'Kapacita termínu byla naplněna. Zvolte jiný termín.'">
          Termín je plný
          <span nz-icon nzType="info-circle" nzTheme="outline"></span>
        </span>

        <ng-container *appMatchCase="true">
          {{ yogaSession.capacity - yogaSession.attendees }} míst volných
          <button nz-button nzType="primary" style="margin-left: 1em;" [routerLink]="[yogaSession.id, 'rezervace']">
            <span nz-icon nzType="plus"></span>
            Online rezervace
          </button>
        </ng-container>
      </nz-list-item-action>
    </ul>

  </nz-list-item>
</nz-list>